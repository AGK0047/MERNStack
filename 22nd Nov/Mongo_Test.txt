TEST


Q1. Find all products that have a price greater than ($gt) $100 but less than or equal to ($lte) $500.

db.products.find({
  price: { $gt: 100, $lte: 500 }
});


Q2. Retrieve products that are in the "Apparel" category OR ($or) have a stock quantity less than 5.

db.products.find({
  $or: [
    { category: "Apparel" },
    { stock: { $lt: 5 } }
  ]
});


Q3.  Find documents where the details.color field does not exist ($exists: false).

db.products.find({
  "details.color": { $exists: false }
});


Q4.Find products whose tags array contains both "New" AND "Premium" (using a comma-separated list in the query document).

db.products.find({
  tags: { $all: ["New", "Premium"] }
});


Q5.Find products where at least one review has a rating less than 3 AND the review date is before 2025-10-01 (using $elemMatch).

db.products.find({
  reviews: {
    $elemMatch: {
      rating: { $lt: 3 },
      date: { $lt: ISODate("2025-10-01T00:00:00Z") }
    }
  }
});

Q6. Find all products with a price less than $100, and sort ($sort) the results by name in descending order (Z to A).

db.products.find({
  price: { $lt: 100 }
}).sort({ name: -1 });


Q7. Retrieve the 3 cheapest products across the entire collection.

db.products.find().sort({ price: 1 }).limit(3);

Q8. For the product named "Ultimate Laptop Pro," decrement ($inc) the stock quantity by 1 and set ($set) its details.brand to "TechCo Elite".

db.products.updateOne(
  { name: "Ultimate Laptop Pro" },
  {
    $inc: { stock: -1 },
    $set: { "details.brand": "TechCo Elite" }
  }
);

Q9.Add the tag "Sale" to the tags array of the product "Adventure Backpack" only if it's not already present 

db.products.updateOne(
  { name: "Adventure Backpack" },
  { $addToSet: { tags: "Sale" } }
);

Q10. Remove ($pull) all instances of the tag "Sale" from the tags array for ALL documents in the collection.
 
db.products.updateMany(
  {},
  { $pull: { tags: "Sale" } }
);

Q11. Calculate the total inventory value (sum of price * stock) for each category. (Hint: use $group, $sum, and $multiply).

db.products.aggregate([
  {
    $group: {
      _id: "$category",
      totalInventoryValue: {
        $sum: {
          $multiply: ["$price", "$stock"]
        }
      }
    }
  }
]);

Q12.Count the total number of products supplied by each details.brand.

db.products.aggregate([
  {
    $group: {
      _id: "$details.brand",
      productCount: { $sum: 1 }
    }
  }
]);




